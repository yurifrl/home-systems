services:
  uptime-kuma:
    image: louislam/uptime-kuma:1
    container_name: uptime-kuma
    volumes:
      - /uptime-kuma-data:/app/data
    ports:
      - "3001:3001"
    restart: always

  uptime-shell:
    build: .
    restart: always

  cloudflared:
    image: cloudflare/cloudflared:latest
    command: tunnel --config /etc/cloudflared/config.yaml run
    volumes:
      - ./secrets/cloudflare.json:/etc/cloudflared/config.json
      - ./tunnel-config.yaml:/etc/cloudflared/config.yaml
    env_file:
      - secrets/secrets.env
    restart: always